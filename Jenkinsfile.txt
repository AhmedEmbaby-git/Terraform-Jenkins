pipeline {
     agent any

     tools {
          terraform 'Terraform-Jenkins'
       }
 
       stages { 
          stage ("checkout from GIT") { 
            steps {checkout scmGit(branches: [[name: '*/main']], extensions: [], userRemoteConfigs: [[credentialsId: 'dec1a511-4e4c-46cc-a982-f84a2f664999', url: 'https://github.com/AhmedEmbaby-git/Terraform-Jenkins']])
          
         }
      }

       stage ("terraform init") { 
         steps {
           sh 'terraform init'

         }
      }
      
     stage ("terraform fmt") { 
         steps { 
           sh 'terraform fmt'

         }
      }
      stage ("terraform plan") { 
         steps { 
           sh 'terraform plan'

         }
      }

     stage ("terraform apply") { 
         steps { 
           sh 'terraform apply autoapprove'

         }
      }
   }
}
